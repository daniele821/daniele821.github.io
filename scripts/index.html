<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Init script</title>
    <link rel="icon" type="image/png" href="../icons/scripts.png">
    <style>
        * {
            background: #181a1b;
            color: #e8e6e3;
            font-family: sans-serif;
            box-sizing: border-box;
        }

        body {
            font-size: 1em;
            margin: 1rem;
        }

        button {
            font-size: 1em;
            padding: 0.4em 1em;
            margin-bottom: 1em;
        }
        .name {
            display: inline-block;
            padding-right: 10px;
            font-weight: bold;
            color: green;
        }
    </style>
</head>


<body>
    <p>
        Run the following to do install operations:
    </p>
    <p class="name">- initialize fedora-kde system:</p>
    <button type="button" onclick="copy('init')">Copy</button>
    <pre id="init" class="installers">
        sudo -v &&
        { while sleep 200; do sudo -v; done & } &&
        { systemd-inhibit --what=idle:sleep sleep 7200 & } &&
        tuned-adm profile throughput-performance &&
        TMP_DIR="$(mktemp -d)" &&
        wget -O "$TMP_DIR/dotfiles.zip" https://github.com/daniele821/dotfiles/archive/refs/heads/fedora-kde.zip &&
        unzip -d "$TMP_DIR" "$TMP_DIR/dotfiles.zip" &&
        "${TMP_DIR}/dotfiles-fedora-kde/autosaver" run &&
        "${TMP_DIR}/dotfiles-fedora-kde/autosaver" restoreall &&
        for i in {30..1}; do
            echo -en "\r\e[Krebooting in $i seconds... ctrl+c to skip"
            sleep 1
        done &&
        tuned-adm profile powersave &&
        reboot || echo -e "\e[1;31mfailed to download and run init scripts\e[m"
    </pre>
</body>

<script>
    function copy(elementId) {
        const copyText = document.getElementById(elementId).textContent.trim();
        navigator.clipboard.writeText(copyText)
    }
</script>

</html>
